(window["webpackJsonpaction-network-signin-form"]=window["webpackJsonpaction-network-signin-form"]||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/logo.ce37af65.png"},37:function(e,t,n){e.exports=n.p+"static/media/loading.6020d4a5.png"},40:function(e,t,n){e.exports=n(69)},46:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),l=(n(45),n(46),n(4)),o=n(2),s=n(7),u=n(9),d=n(22),m=n(32),f=n(33),p=function(e){return{type:"error/set",payload:{text:e}}},v=new o.default.Map({text:void 0}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"error/set":return new o.default.Map(t.payload);case"error/clear":return v;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return{type:"loading/set",payload:{displayText:e,isLoading:!0}}},h=new o.default.Map({isLoading:!1,displayText:void 0}),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loading/set":return new o.default.Map(t.payload);case"loading/clear":return h;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e.set(t.id,new o.default.Map(t))},new o.default.OrderedMap)},O=new o.default.List,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"events/set":return t.payload.events;default:return e}},j=new o.default.Map,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup/setEvent":return e.merge({selectedEvent:t.payload});default:return e}},N=n(34);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var T,x=function(){return{type:"signin/success/clear"}},M=new o.default.Map({displaySuccess:!1}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signin/success/set":return e.merge({displaySuccess:!0});case"signin/success/clear":return e.merge({displaySuccess:!1});default:return e}},_=new o.default.Map,I=document.getElementsByTagName("base")[0].getAttribute("href"),L=Object(s.a)({basename:I}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,C=Object(u.d)((T=L,Object(f.combineReducers)({error:g,events:w,loading:y,setup:S,signin:P,router:Object(d.connectRouter)(T)})),_,D(Object(u.a)(Object(d.routerMiddleware)(L),m.a))),A=function(e){var t=e.text;return t?r.a.createElement("h1",null,t):null},R=n(36),B=n.n(R),F=(n(63),function(e){var t=e.eventTitle;return r.a.createElement("header",null,r.a.createElement("img",{src:B.a,alt:"DSA Los Angeles"}),r.a.createElement("h1",null,t),r.a.createElement("div",{className:"block-off"},"\xa0"))});F.defaultProps={eventTitle:"DSA-LA Event Sign In"};var J=F,q=(n(64),function(e){var t=e.eventTitle,n=e.errorText,c=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(J,{eventTitle:t}),r.a.createElement("div",{className:"container layout-container"},r.a.createElement(A,{text:n}),c))}),U=Object(l.connect)(function(e){var t=e.getIn(["setup","selectedEvent"]);return{eventTitle:e.getIn(["events",t,"title"]),errorText:e.getIn(["error","text"])}})(q),W=n(15),z=n(16),H=n(18),X=n(17),V=n(19),Z=n(3),$=n.n(Z),G=(n(65),$.a.string,$.a.string,$.a.func,function(e){var t=e.title,n=e.description,a=e.start_date,c=e.onClick;return r.a.createElement("button",{className:"btn btn-outline-info btn-event",onClick:c},r.a.createElement("h3",null,t),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("p",null,"Starts at ",new Date(a).toLocaleString("en-US",{timeZone:"UTC"})))}),K=function(e){function t(){return Object(W.a)(this,t),Object(H.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){this.props.events&&this.props.events.length>0||this.props.loadEvents()}},{key:"render",value:function(){var e=this.props,t=e.events,n=e.onEventClick;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"page-header"},r.a.createElement("h2",null,"Here are today's events.")),r.a.createElement("p",null,"Click on your event and attendees can start signing in."),t.map(function(e){return r.a.createElement(G,Object.assign({key:e.id,onClick:function(){return n(e.id)}},e))}))}}]),t}(r.a.Component),Q={loadEvents:function(){return function(e){return e(b()),fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/events",{headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(function(t){e({type:"events/set",payload:{events:E(t)}}),e({type:"loading/clear"})}).catch(function(){e(p("Error fetching events."))})}},onEventClick:function(e){return{type:"setup/setEvent",payload:e}}},Y=Object(l.connect)(function(e){return{events:e.get("events",new Map).valueSeq().toJS()}},Q)(K),ee=(n(66),n(37)),te=n.n(ee),ne=function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{src:te.a,className:"loading",alt:"Loading..."}))},ae=n(11),re=n(39),ce=(n(68),function(e){var t=e.selfDestruct,n=Object(a.useState)(3),c=Object(re.a)(n,2),i=c[0],l=c[1];return Object(a.useEffect)(function(){setTimeout(function e(){var n=i-1;0===n?t():(l(n),setTimeout(e,1e3))},1e3)}),r.a.createElement("div",{className:"alert alert-success alert-signin"},r.a.createElement("h3",null,"Sign In Saved"),"This message will self-destruct in ",i,"...")}),ie=function(e){return e?void 0:"Required."},le=function(e){var t=e.disabled,n=e.field,a=e.formState,c=e.label,i=e.validate,l=a.errors[n],o="undefined"!==typeof l,s="form-control form-control-lg";return o&&(s+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:n},c),r.a.createElement(ae.b,{className:s,autoComplete:"off",field:n,id:n,validate:i,disabled:t,validateOnBlur:!0}),o?r.a.createElement("div",{className:"invalid-feedback"},l):null)};le.defaultProps={disabled:!1};var oe=Object(ae.c)(le),se=function(e){function t(){return Object(W.a)(this,t),Object(H.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.clearSuccess,a=e.displaySuccess;return r.a.createElement("div",{className:"container"},r.a.createElement(ae.a,{id:"signin-form",onSubmit:t},a&&r.a.createElement(ce,{selfDestruct:n}),r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(oe,{field:"firstName",label:"First Name",validate:ie}),r.a.createElement(oe,{field:"lastName",label:"Last Name",validate:ie}),r.a.createElement(oe,{field:"emailAddress",label:"Email Address",validate:ie}),r.a.createElement(oe,{field:"phoneNumber",label:"Phone Number",validate:ie}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))}}]),t}(r.a.Component),ue={onSubmit:function(e){return function(t,n){t({type:"error/clear"}),t({type:"signin/success/clear"}),t(b());var a=n().getIn(["setup","selectedEvent"]);return function(e){console.log("Work in progress...",e);var t={event_id:e.eventId,first_name:e.firstName,last_name:e.lastName,email_address:e.emailAddress,phone_number:e.phoneNumber};return fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/signins",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(t)})}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{eventId:a})).then(function(){t({type:"loading/clear"}),t({type:"signin/success/set"})}).catch(function(){t({type:"loading/clear"}),t(p("An error occurred.  Please try again."))})}},clearSuccess:x},de=Object(l.connect)(function(e){return{displaySuccess:e.getIn(["signin","displaySuccess"],!1)}},ue)(se),me=Object(l.connect)(function(e){var t=e.getIn(["loading","isLoading"]);return{hasEvent:"undefined"!==typeof e.getIn(["setup","selectedEvent"]),isLoading:t}})(function(e){var t=e.hasEvent;return e.isLoading?r.a.createElement(ne,null):t?r.a.createElement(de,null):r.a.createElement(Y,null)});var fe=function(){return r.a.createElement(l.Provider,{store:C},r.a.createElement(U,null,r.a.createElement(me,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.a87f298e.chunk.js.map