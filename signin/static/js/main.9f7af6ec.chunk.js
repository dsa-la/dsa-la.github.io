(window["webpackJsonpaction-network-signin-form"]=window["webpackJsonpaction-network-signin-form"]||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/logo.ce37af65.png"},38:function(e,t,n){e.exports=n.p+"static/media/loading.6020d4a5.png"},41:function(e,t,n){e.exports=n(71)},47:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),s=n.n(o),i=(n(46),n(47),n(4)),c=n(2),l=n(7),u=n(10),d=n(22),p=n(32),m=n(33),f=function(e){return{type:"error/set",payload:{text:e}}},v=new c.default.Map({text:void 0}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"error/set":return new c.default.Map(t.payload);case"error/clear":return v;default:return e}},h=n(34),b=n.n(h),y="https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/events",E="https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/signins",w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return{type:"loading/set",payload:{displayText:e,isLoading:!0}}},O=new c.default.Map({isLoading:!1,displayText:void 0}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loading/set":return new c.default.Map(t.payload);case"loading/clear":return O;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e.set(t.id,new c.default.Map(t))},new c.default.OrderedMap)},N=new c.default.Map,k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"events/set":return e.merge({upcomingEvents:t.payload.events});case"events/set/withSignins":return e.merge({eventsWithSignIns:t.payload.events});default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"password/set":return t.payload;default:return e}},A=new c.default.Map({showReports:!1}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup/setEvent":return e.merge({selectedEvent:t.payload});case"setup/setReports":return e.merge({showReports:!0});default:return e}},T=n(35);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var M,x=function(){return{type:"signin/success/clear"}},L=new c.default.Map({displaySuccess:!1}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signin/success/set":return e.merge({displaySuccess:!0});case"signin/success/clear":return e.merge({displaySuccess:!1});default:return e}},_=new c.default.Map,D=document.getElementsByTagName("base")[0].getAttribute("href"),H=Object(l.a)({basename:D}),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,W=Object(u.d)((M=H,Object(m.combineReducers)({error:g,events:k,loading:j,password:I,setup:P,signin:R,router:Object(d.connectRouter)(M)})),_,z(Object(u.a)(Object(d.routerMiddleware)(H),p.a))),q=(n(64),function(e){var t=e.text;return t?r.a.createElement("h1",{className:"heading-error"},t):null}),F=n(37),J=n.n(F),B=(n(65),function(e){var t=e.eventTitle;return r.a.createElement("header",null,r.a.createElement("img",{src:J.a,alt:"DSA Los Angeles"}),r.a.createElement("h1",null,t),r.a.createElement("div",{className:"block-off"},"\xa0"))});B.defaultProps={eventTitle:"DSA-LA Event Sign In"};var U=B,X=(n(66),function(e){var t=e.eventTitle,n=e.errorText,o=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(U,{eventTitle:t}),r.a.createElement("div",{className:"container layout-container"},r.a.createElement(q,{text:n}),o))}),V=Object(i.connect)(function(e){var t=e.getIn(["setup","selectedEvent"]);return{eventTitle:e.getIn(["events","upcomingEvents",t,"title"]),errorText:e.getIn(["error","text"])}})(X),Z=n(15),$=n(16),G=n(18),K=n(17),Q=n(19),Y=n(3),ee=n.n(Y),te=(n(67),ee.a.string,ee.a.string,ee.a.func,function(e){var t=e.title,n=e.description,a=e.start_date,o=e.onClick;return r.a.createElement("button",{className:"btn btn-outline-info btn-event",onClick:o},r.a.createElement("h3",null,t),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("p",null,"Starts at ",new Date(a).toLocaleString("en-US",{timeZone:"UTC"})))}),ne=function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(G.a)(this,Object(K.a)(t).call(this,e))).onHelpClicked=function(){n.setState({showHelp:!0})},n.state={showHelp:!1},n}return Object(Q.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.props.events&&this.props.events.length>0||this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.events,n=e.onEventClick,o=e.showReports,s=this.state.showHelp;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"page-header"},r.a.createElement("h2",null,"Click your event and attendees can start signing in.")),s?r.a.createElement("p",null,"Events are displayed here if the start time set in Action Network is later than twelve hours ago and earlier than two days from now. This event list syncs with Action Network every five minutes. If you just created or updated your event and it's not here yet, hang tight and it will show up soon. Refresh the page to reload events."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"big-bottom"},r.a.createElement("button",{className:"btn btn-danger btn-branded",onClick:o},"Download past attendees instead."),r.a.createElement("button",{className:"btn btn-danger btn-branded",onClick:this.onHelpClicked},"Help! My event isn't here!"))),t.map(function(e){return r.a.createElement(te,Object.assign({key:e.id,onClick:function(){return n(e.id)}},e))}))}}]),t}(r.a.Component),ae={onLoad:function(){return function(e,t){return e(w()),function(e){return fetch(y,{headers:{Accept:"application/json",Authorization:e}}).then(function(e){return e.json()})}(t().get("password")).then(function(t){e({type:"events/set",payload:{events:S(t)}}),e({type:"loading/clear"})}).catch(function(){e(f("Wrong password.  Please refresh and try again.")),e({type:"loading/clear"})})}},onEventClick:function(e){return{type:"setup/setEvent",payload:e}},showReports:function(){return{type:"setup/setReports"}}},re=Object(i.connect)(function(e){return{events:e.getIn(["events","upcomingEvents"],new c.default.Map).valueSeq().toJS()}},ae)(ne),oe={onLoad:function(){return function(e,t){return e(w()),function(e){var t="".concat(y,"?with=signins");return fetch(t,{headers:{Accept:"application/json",Authorization:e}}).then(function(e){return e.json()})}(t().get("password")).then(function(t){e({type:"events/set/withSignins",payload:{events:S(t)}}),e({type:"loading/clear"})}).catch(function(){e(f("Wrong password.  Please refresh and try again.")),e({type:"loading/clear"})})}},onEventClick:function(e){return function(t,n){var a=n().get("password"),r="".concat(E,"?event_id=").concat(e);return fetch(r,{headers:{Accept:"application/json",Authorization:a}}).then(function(e){return e.blob()}).then(function(e){b()(e,"attendees.csv","text/csv")}),{type:"download"}}}},se=Object(i.connect)(function(e){return{events:e.getIn(["events","eventsWithSignIns"],new c.default.Map).valueSeq().toJS()}},oe)(ne),ie=(n(68),n(38)),ce=n.n(ie),le=function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{src:ce.a,className:"loading",alt:"Loading..."}))},ue=n(9),de=function(e){return e?void 0:"Required."},pe=function(e){var t=e.disabled,n=e.field,a=e.formState,o=e.label,s=e.validate,i=a.errors[n],c="undefined"!==typeof i,l="form-control form-control-lg";return c&&(l+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:n},o),r.a.createElement(ue.b,{className:l,autoComplete:"off",field:n,id:n,validate:s,disabled:t,validateOnBlur:!0}),c?r.a.createElement("div",{className:"invalid-feedback"},i):null)};pe.defaultProps={disabled:!1};var me=Object(ue.c)(pe),fe=function(e){var t=e.onSubmit;return Object(a.useEffect)(function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}),r.a.createElement("div",{className:"container"},r.a.createElement(ue.a,{id:"password-form",onSubmit:t},r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(me,{field:"password",label:"Enter your secret password.",validate:de}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-primary btn-branded",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))},ve={onSubmit:function(e){return{type:"password/set",payload:e.password}}},ge=Object(i.connect)(function(){return{}},ve)(fe),he=n(40),be=(n(70),function(e){var t=e.selfDestruct,n=Object(a.useState)(3),o=Object(he.a)(n,2),s=o[0],i=o[1];return Object(a.useEffect)(function(){setTimeout(function e(){var n=s-1;0===n?t():(i(n),setTimeout(e,1e3))},1e3)}),r.a.createElement("div",{className:"alert alert-success alert-signin"},r.a.createElement("h3",null,"Sign In Saved"),"This message will self-destruct in ",s,"...")}),ye=function(e){function t(){return Object(Z.a)(this,t),Object(G.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.clearSuccess,a=e.displaySuccess;return r.a.createElement("div",{className:"container"},r.a.createElement(ue.a,{id:"signin-form",onSubmit:t},a&&r.a.createElement(be,{selfDestruct:n}),r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(me,{field:"firstName",label:"First Name",validate:de}),r.a.createElement(me,{field:"lastName",label:"Last Name",validate:de}),r.a.createElement(me,{field:"emailAddress",label:"Email Address",validate:de}),r.a.createElement(me,{field:"phoneNumber",label:"Phone Number"}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-danger btn-branded",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))}}]),t}(r.a.Component),Ee={onSubmit:function(e){return function(t,n){t({type:"error/clear"}),t({type:"signin/success/clear"}),t(w());var a=n().getIn(["setup","selectedEvent"]),r=n().get("password");return function(e,t){var n={event_id:e.eventId,first_name:e.firstName,last_name:e.lastName,email_address:e.emailAddress,phone_number:e.phoneNumber};return fetch(E,{method:"POST",headers:{Accept:"application/json",Authorization:t},body:JSON.stringify(n)})}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach(function(t){Object(T.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{eventId:a}),r).then(function(){t({type:"loading/clear"}),t({type:"signin/success/set"})}).catch(function(){t({type:"loading/clear"}),t(f("An error occurred.  Please try again."))})}},clearSuccess:x},we=Object(i.connect)(function(e){return{displaySuccess:e.getIn(["signin","displaySuccess"],!1)}},Ee)(ye),Oe=Object(i.connect)(function(e){var t=e.getIn(["loading","isLoading"]);return{hasEvent:"undefined"!==typeof e.getIn(["setup","selectedEvent"]),hasPassword:!!e.get("password"),shouldShowReports:e.getIn(["setup","showReports"],!1),isLoading:t}})(function(e){var t=e.hasEvent,n=e.hasPassword,a=e.isLoading,o=e.shouldShowReports;return a?r.a.createElement(le,null):n?t?r.a.createElement(we,null):o?r.a.createElement(se,null):r.a.createElement(re,null):r.a.createElement(ge,null)});var je=function(){return r.a.createElement(i.Provider,{store:W},r.a.createElement(V,null,r.a.createElement(Oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.9f7af6ec.chunk.js.map