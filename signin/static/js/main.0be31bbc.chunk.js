(window["webpackJsonpaction-network-signin-form"]=window["webpackJsonpaction-network-signin-form"]||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/logo.ce37af65.png"},37:function(e,t,n){e.exports=n.p+"static/media/loading.6020d4a5.png"},40:function(e,t,n){e.exports=n(69)},46:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),o=(n(45),n(46),n(4)),s=n(2),l=n(7),u=n(10),d=n(22),p=n(32),m=n(33),f=function(e){return{type:"error/set",payload:{text:e}}},v=new s.default.Map({text:void 0}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"error/set":return new s.default.Map(t.payload);case"error/clear":return v;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return{type:"loading/set",payload:{displayText:e,isLoading:!0}}},y=new s.default.Map({isLoading:!1,displayText:void 0}),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loading/set":return new s.default.Map(t.payload);case"loading/clear":return y;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e.set(t.id,new s.default.Map(t))},new s.default.OrderedMap)},w=new s.default.List,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"events/set":return t.payload.events;default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"password/set":return t.payload;default:return e}},S=new s.default.Map,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup/setEvent":return e.merge({selectedEvent:t.payload});default:return e}},k=n(34);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var P,x=function(){return{type:"signin/success/clear"}},C=new s.default.Map({displaySuccess:!1}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signin/success/set":return e.merge({displaySuccess:!0});case"signin/success/clear":return e.merge({displaySuccess:!1});default:return e}},M=new s.default.Map,D=document.getElementsByTagName("base")[0].getAttribute("href"),I=Object(l.a)({basename:D}),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,A=Object(u.d)((P=I,Object(m.combineReducers)({error:g,events:O,loading:h,password:j,setup:N,signin:_,router:Object(d.connectRouter)(P)})),M,L(Object(u.a)(Object(d.routerMiddleware)(I),p.a))),z=function(e){var t=e.text;return t?r.a.createElement("h1",null,t):null},R=n(36),q=n.n(R),B=(n(63),function(e){var t=e.eventTitle;return r.a.createElement("header",null,r.a.createElement("img",{src:q.a,alt:"DSA Los Angeles"}),r.a.createElement("h1",null,t),r.a.createElement("div",{className:"block-off"},"\xa0"))});B.defaultProps={eventTitle:"DSA-LA Event Sign In"};var F=B,J=(n(64),function(e){var t=e.eventTitle,n=e.errorText,c=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(F,{eventTitle:t}),r.a.createElement("div",{className:"container layout-container"},r.a.createElement(z,{text:n}),c))}),U=Object(o.connect)(function(e){var t=e.getIn(["setup","selectedEvent"]);return{eventTitle:e.getIn(["events",t,"title"]),errorText:e.getIn(["error","text"])}})(J),H=n(15),W=n(16),X=n(18),Z=n(17),V=n(19),$=n(3),G=n.n($),K=(n(65),G.a.string,G.a.string,G.a.func,function(e){var t=e.title,n=e.description,a=e.start_date,c=e.onClick;return r.a.createElement("button",{className:"btn btn-outline-info btn-event",onClick:c},r.a.createElement("h3",null,t),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("p",null,"Starts at ",new Date(a).toLocaleString("en-US",{timeZone:"UTC"})))}),Q=function(e){function t(){return Object(H.a)(this,t),Object(X.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.events&&this.props.events.length>0||this.props.loadEvents()}},{key:"render",value:function(){var e=this.props,t=e.events,n=e.onEventClick;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"page-header"},r.a.createElement("h2",null,"Here are today's events.")),r.a.createElement("p",null,"Click on your event and attendees can start signing in."),t.map(function(e){return r.a.createElement(K,Object.assign({key:e.id,onClick:function(){return n(e.id)}},e))}))}}]),t}(r.a.Component),Y={loadEvents:function(){return function(e,t){return e(b()),function(e){return fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/events",{headers:{Accept:"application/json",Authorization:e}}).then(function(e){return e.json()})}(t().get("password")).then(function(t){e({type:"events/set",payload:{events:E(t)}}),e({type:"loading/clear"})}).catch(function(){e(f("Error fetching events.  Did you enter a correct password?")),e({type:"loading/clear"})})}},onEventClick:function(e){return{type:"setup/setEvent",payload:e}}},ee=Object(o.connect)(function(e){return{events:e.get("events",new Map).valueSeq().toJS()}},Y)(Q),te=(n(66),n(37)),ne=n.n(te),ae=function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{src:ne.a,className:"loading",alt:"Loading..."}))},re=n(9),ce=function(e){return e?void 0:"Required."},ie=function(e){var t=e.disabled,n=e.field,a=e.formState,c=e.label,i=e.validate,o=a.errors[n],s="undefined"!==typeof o,l="form-control form-control-lg";return s&&(l+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:n},c),r.a.createElement(re.b,{className:l,autoComplete:"off",field:n,id:n,validate:i,disabled:t,validateOnBlur:!0}),s?r.a.createElement("div",{className:"invalid-feedback"},o):null)};ie.defaultProps={disabled:!1};var oe=Object(re.c)(ie),se=function(e){var t=e.onSubmit;return Object(a.useEffect)(function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}),r.a.createElement("div",{className:"container"},r.a.createElement(re.a,{id:"password-form",onSubmit:t},r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(oe,{field:"password",label:"Enter your secret password.",validate:ce}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))},le={onSubmit:function(e){return{type:"password/set",payload:e.password}}},ue=Object(o.connect)(function(){return{}},le)(se),de=n(39),pe=(n(68),function(e){var t=e.selfDestruct,n=Object(a.useState)(3),c=Object(de.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)(function(){setTimeout(function e(){var n=i-1;0===n?t():(o(n),setTimeout(e,1e3))},1e3)}),r.a.createElement("div",{className:"alert alert-success alert-signin"},r.a.createElement("h3",null,"Sign In Saved"),"This message will self-destruct in ",i,"...")}),me=function(e){function t(){return Object(H.a)(this,t),Object(X.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.clearSuccess,a=e.displaySuccess;return r.a.createElement("div",{className:"container"},r.a.createElement(re.a,{id:"signin-form",onSubmit:t},a&&r.a.createElement(pe,{selfDestruct:n}),r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(oe,{field:"firstName",label:"First Name",validate:ce}),r.a.createElement(oe,{field:"lastName",label:"Last Name",validate:ce}),r.a.createElement(oe,{field:"emailAddress",label:"Email Address",validate:ce}),r.a.createElement(oe,{field:"phoneNumber",label:"Phone Number",validate:ce}),r.a.createElement(oe,{field:"zipCode",label:"Zip Code",validate:ce}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))}}]),t}(r.a.Component),fe={onSubmit:function(e){return function(t,n){t({type:"error/clear"}),t({type:"signin/success/clear"}),t(b());var a=n().getIn(["setup","selectedEvent"]),r=n().get("password");return function(e,t){var n={event_id:e.eventId,first_name:e.firstName,last_name:e.lastName,email_address:e.emailAddress,phone_number:e.phoneNumber,zip_code:e.zipCode};return fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/signins",{method:"POST",headers:{Accept:"application/json",Authorization:t},body:JSON.stringify(n)})}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach(function(t){Object(k.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{eventId:a}),r).then(function(){t({type:"loading/clear"}),t({type:"signin/success/set"})}).catch(function(){t({type:"loading/clear"}),t(f("An error occurred.  Please try again."))})}},clearSuccess:x},ve=Object(o.connect)(function(e){return{displaySuccess:e.getIn(["signin","displaySuccess"],!1)}},fe)(me),ge=Object(o.connect)(function(e){var t=e.getIn(["loading","isLoading"]);return{hasEvent:"undefined"!==typeof e.getIn(["setup","selectedEvent"]),hasPassword:!!e.get("password"),isLoading:t}})(function(e){var t=e.hasEvent,n=e.hasPassword;return e.isLoading?r.a.createElement(ae,null):n?t?r.a.createElement(ve,null):r.a.createElement(ee,null):r.a.createElement(ue,null)});var be=function(){return r.a.createElement(o.Provider,{store:A},r.a.createElement(U,null,r.a.createElement(ge,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.0be31bbc.chunk.js.map