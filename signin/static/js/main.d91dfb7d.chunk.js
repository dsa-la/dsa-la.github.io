(window["webpackJsonpaction-network-signin-form"]=window["webpackJsonpaction-network-signin-form"]||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/logo.ce37af65.png"},37:function(e,t,n){e.exports=n.p+"static/media/loading.6020d4a5.png"},40:function(e,t,n){e.exports=n(69)},46:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),l=(n(45),n(46),n(4)),o=n(2),s=n(7),u=n(9),d=n(22),m=n(32),p=n(33),f=function(e){return{type:"error/set",payload:{text:e}}},v=new o.default.Map({text:void 0}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"error/set":return new o.default.Map(t.payload);case"error/clear":return v;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";return{type:"loading/set",payload:{displayText:e,isLoading:!0}}},h=new o.default.Map({isLoading:!1,displayText:void 0}),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loading/set":return new o.default.Map(t.payload);case"loading/clear":return h;default:return e}},E=new o.default.List,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"events/set":return t.payload.events;default:return e}},w=new o.default.Map,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup/setEvent":return e.merge({selectedEvent:t.payload});default:return e}},S=n(34);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var k,T=function(){return{type:"signin/success/clear"}},x=new o.default.Map({displaySuccess:!1}),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signin/success/set":return e.merge({displaySuccess:!0});case"signin/success/clear":return e.merge({displaySuccess:!1});default:return e}},P=new o.default.Map,_=document.getElementsByTagName("base")[0].getAttribute("href"),I=Object(s.a)({basename:_}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,M=Object(u.d)((k=I,Object(p.combineReducers)({error:g,events:O,loading:y,setup:j,signin:L,router:Object(d.connectRouter)(k)})),P,D(Object(u.a)(Object(d.routerMiddleware)(I),m.a))),C=function(e){var t=e.text;return t?r.a.createElement("h1",null,t):null},A=n(36),R=n.n(A),B=(n(63),function(e){var t=e.eventTitle;return r.a.createElement("header",null,r.a.createElement("img",{src:R.a,alt:"DSA Los Angeles"}),r.a.createElement("h1",null,t),r.a.createElement("div",{className:"block-off"},"\xa0"))});B.defaultProps={eventTitle:"DSA-LA Event Sign In"};var F=B,J=(n(64),function(e){var t=e.eventTitle,n=e.errorText,c=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(F,{eventTitle:t}),r.a.createElement("div",{className:"container layout-container"},r.a.createElement(C,{text:n}),c))}),q=Object(l.connect)(function(e){var t=e.getIn(["setup","selectedEvent"]);return{eventTitle:e.getIn(["events",t,"title"]),errorText:e.getIn(["error","text"])}})(J),U=n(15),W=n(16),z=n(18),H=n(17),X=n(19),V=n(3),Z=n.n(V),$=(n(65),Z.a.string,Z.a.string,Z.a.func,function(e){var t=e.title,n=e.description,a=e.start_date,c=e.onClick;return r.a.createElement("button",{className:"btn btn-outline-info btn-event",onClick:c},r.a.createElement("h3",null,t),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("p",null,"Starts at ",new Date(a).toLocaleString("en-US",{timeZone:"UTC"})))}),G=function(e){function t(){return Object(U.a)(this,t),Object(z.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.events&&this.props.events.length>0||this.props.loadEvents()}},{key:"render",value:function(){var e=this.props,t=e.events,n=e.onEventClick;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"page-header"},r.a.createElement("h2",null,"Here are today's events.")),r.a.createElement("p",null,"Click on your event and attendees can start signing in."),t.map(function(e){return r.a.createElement($,Object.assign({key:e.id,onClick:function(){return n(e.id)}},e))}))}}]),t}(r.a.Component),K={loadEvents:function(){return function(e){return e(b()),fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/events",{headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(function(t){e({type:"events/set",payload:{events:new o.default.List(t)}}),e({type:"loading/clear"})}).catch(function(){e(f("Error fetching events."))})}},onEventClick:function(e){return{type:"setup/setEvent",payload:e}}},Q=Object(l.connect)(function(e){return{events:e.get("events",new Map).valueSeq().toJS()}},K)(G),Y=(n(66),n(37)),ee=n.n(Y),te=function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{src:ee.a,className:"loading",alt:"Loading..."}))},ne=n(11),ae=n(39),re=(n(68),function(e){var t=e.selfDestruct,n=Object(a.useState)(3),c=Object(ae.a)(n,2),i=c[0],l=c[1];return Object(a.useEffect)(function(){setTimeout(function e(){var n=i-1;0==n?t():(l(n),setTimeout(e,1e3))},1e3)}),r.a.createElement("div",{className:"alert alert-success alert-signin"},r.a.createElement("h3",null,"Sign In Saved"),"This message will self-destruct in ",i,"...")}),ce=function(e){return e?void 0:"Required."},ie=function(e){var t=e.disabled,n=e.field,a=e.formState,c=e.label,i=e.validate,l=a.errors[n],o="undefined"!==typeof l,s="form-control form-control-lg";return o&&(s+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:n},c),r.a.createElement(ne.b,{className:s,autoComplete:"off",field:n,id:n,validate:i,disabled:t,validateOnBlur:!0}),o?r.a.createElement("div",{className:"invalid-feedback"},l):null)};ie.defaultProps={disabled:!1};var le=Object(ne.c)(ie),oe=function(e){function t(){return Object(U.a)(this,t),Object(z.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector('input:not([style="display: none;"]').focus();e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.onSubmit,n=e.clearSuccess,a=e.displaySuccess;return r.a.createElement("div",{className:"container"},r.a.createElement(ne.a,{id:"signin-form",onSubmit:t},a&&r.a.createElement(re,{selfDestruct:n}),r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement(le,{field:"firstName",label:"First Name",validate:ce}),r.a.createElement(le,{field:"lastName",label:"Last Name",validate:ce}),r.a.createElement(le,{field:"emailAddress",label:"Email Address",validate:ce}),r.a.createElement(le,{field:"phoneNumber",label:"Phone Number",validate:ce}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Submit")),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-light",type:"reset"},"Reset"))))}}]),t}(r.a.Component),se={onSubmit:function(e){return function(t,n){t({type:"error/clear"}),t({type:"signin/success/clear"}),t(b());var a=n().getIn(["setup","selectedEvent"]);return function(e){console.log("Work in progress...",e);var t={event_id:e.eventId,first_name:e.firstName,last_name:e.lastName,email_address:e.emailAddress,phone_number:e.phoneNumber};return fetch("https://jobbsevf6l.execute-api.us-west-1.amazonaws.com/dsa-la/signins",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(t)})}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach(function(t){Object(S.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{eventId:a})).then(function(){t({type:"loading/clear"}),t({type:"signin/success/set"})}).catch(function(){t({type:"loading/clear"}),t(f("An error occurred.  Please try again."))})}},clearSuccess:T},ue=Object(l.connect)(function(e){return{displaySuccess:e.getIn(["signin","displaySuccess"],!1)}},se)(oe),de=Object(l.connect)(function(e){var t=e.getIn(["loading","isLoading"]);return{hasEvent:"undefined"!==typeof e.getIn(["setup","selectedEvent"]),isLoading:t}})(function(e){var t=e.hasEvent;return e.isLoading?r.a.createElement(te,null):t?r.a.createElement(ue,null):r.a.createElement(Q,null)});var me=function(){return r.a.createElement(l.Provider,{store:M},r.a.createElement(q,null,r.a.createElement(de,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.d91dfb7d.chunk.js.map